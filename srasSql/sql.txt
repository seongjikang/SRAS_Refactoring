USE MYSQL

insert into user(host, user, authentication_string, ssl_cipher, x509_issuer, x509_subject) values('localhost', 'dtdba', password('dtdba'), '', '', '');
flush privileges;
grant all privileges on *.* to dtdba@localhost identified by 'dtdba' with grant option;
flush privileges;

create database techdb;

CREATE TABLE USER_TB (
	USER_ID CHAR(8) NOT NULL,
	PASSWORD VARCHAR(100) NOT NULL,
	USER_NAME VARCHAR(100) NOT NULL,
	DEPARTMENT VARCHAR(100) NOT NULL,
	AUTHORITY VARCHAR(10) NOT NULL,
	PRIMARY KEY (USER_ID)
) CHARSET=UTF8;

INSERT INTO USER_TB (USER_ID, PASSWORD, USER_NAME, DEPARTMENT, AUTHORITY) VALUES ('18100030', '18100030', '°­¼ºÁö', 'D', 'replier');

CREATE TABLE TAG_TB (
	TAG_CONTENT VARCHAR(100)
) CHARSET=UTF8;

CREATE TABLE REVIEW_TB (
	REVIEW_DATE VARCHAR(8) NOT NULL,
	REVIEW_ID VARCHAR(8) NOT NULL,
	REVIEWER VARCHAR(100),
	REVIEW_CONTENT VARCHAR(4000),
	REVIEW_STAR VARCHAR(10),
	DEVICE_INFO VARCHAR(500),
	APP_VERSION VARCHAR(100),
	OS_KIND VARCHAR(1),
	OS_VERSION VARCHAR(500),
	TAG VARCHAR(500),
	CONSTRAINT REVIEW_TB_PK  PRIMARY KEY(REVIEW_DATE, REVIEW_ID)
) CHARSET=UTF8;

CREATE TABLE COMMENT_TB (
	COMMENT_ID VARCHAR(8) NOT NULL,
	REVIEW_ID VARCHAR(8) NOT NULL,
	REVIEW_DATE VARCHAR(8) NOT NULL,
	USER_ID VARCHAR(8),
	COMMENT_DATA VARCHAR(4000),
	COMMENT_DATE VARCHAR(8),
	CONSTRAINT COMMENT_TB_PK PRIMARY KEY(COMMENT_ID, REVIEW_ID, REVIEW_DATE),
	CONSTRAINT COMMENT_TB_REVIEW_ID_AND_DATE_FK FOREIGN KEY(REVIEW_DATE, REVIEW_ID) REFERENCES REVIEW_TB(REVIEW_DATE, REVIEW_ID),
	CONSTRAINT COMMENT_TB_USER_ID_FK FOREIGN KEY(USER_ID) REFERENCES USER_TB(USER_ID)
) CHARSET=UTF8;

CREATE TABLE REPLY_TB (
	REVIEW_ID VARCHAR(8) NOT NULL,
	REVIEW_DATE VARCHAR(8) NOT NULL,
	REPLY_MANAGER_ID VARCHAR(8) NOT NULL,
	REVIEW_REPLY VARCHAR(4000),
	REPLY_APPROVE_DATE VARCHAR(8),
	REPLY_APPROVE_CHK VARCHAR(10),
	REPLY_APPROVE_REASON VARCHAR(4000),
	CONSTRAINT REPLY_TB_PK PRIMARY KEY(REVIEW_DATE, REVIEW_ID),
	CONSTRAINT REPLY_TB_REVIEW_ID_AND_DATE_FK FOREIGN KEY(REVIEW_DATE, REVIEW_ID) REFERENCES REVIEW_TB(REVIEW_DATE, REVIEW_ID),
	CONSTRAINT REPLY_TB_REPLY_MANAGER_ID_FK FOREIGN KEY(REPLY_MANAGER_ID) REFERENCES USER_TB(USER_ID)
) CHARSET=UTF8;


CREATE TABLE RECOMMEND_TB (
	RECOMMEND_REVIEW_NO VARCHAR(1) NOT NULL,
	REVIEW_ID VARCHAR(8) NOT NULL,
	REVIEW_DATE VARCHAR(8) NOT NULL,
	IS_POSITIVE VARCHAR(3),
	RECOMMEND_REVIEW VARCHAR(4000),
	RECOMMEND_REPLY VARCHAR(4000),
	CONSTRAINT RECOMMEND_TB_PK PRIMARY KEY(REVIEW_DATE, REVIEW_ID, RECOMMEND_REVIEW_NO),
	CONSTRAINT RECOMMEND_TB_REVIEW_ID_AND_DATE_FK FOREIGN KEY(REVIEW_DATE, REVIEW_ID) REFERENCES REVIEW_TB(REVIEW_DATE, REVIEW_ID)
) CHARSET=UTF8;